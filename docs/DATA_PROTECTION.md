# üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Evrocontayner.

## 1. –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ß—Ç–æ –Ω—É–∂–Ω–æ –∑–∞—â–∏—â–∞—Ç—å
- **`.env` —Ñ–∞–π–ª** ‚Äî –ø–∞—Ä–æ–ª–∏ SMTP, API-–∫–ª—é—á–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
- **`data/db.sqlite`** ‚Äî –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π —Ñ–æ—Ä–º—ã (email, –∏–º–µ–Ω–∞, —Å–æ–æ–±—â–µ–Ω–∏—è)
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏** ‚Äî –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (SSL, API-–∫–ª—é—á–∏ –∏ —Ç.–¥.)

### –ö–∞–∫ —É–∂–µ –∑–∞—â–∏—â–µ–Ω–æ
‚úÖ `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` ‚Äî –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ git  
‚úÖ Pre-commit hook (`Husky`) –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å `.env`  
‚úÖ `.env.example` —Å–ª—É–∂–∏—Ç —à–∞–±–ª–æ–Ω–æ–º –±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤  
‚úÖ –ù–∞ Render –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∑–Ω–∞—á–∏–ª–∏—â–µ

## 2. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–ø–æ—Å–æ–± 1: –í—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –±–æ–ª—å—à–∏–º –∫–æ–º–º–∏—Ç–æ–º**
```bash
npm run backup-db
# –°–æ–∑–¥–∞—Å—Ç –∫–æ–ø–∏—é: backups-server/db.backup-20260208-143022.sqlite
```

**–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ git hooks (–∫–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç)**
–î–æ–±–∞–≤—å—Ç–µ –≤ `.husky/post-merge`:
```bash
npm run backup-db
```

**–°–ø–æ—Å–æ–± 3: Scheduled backup –Ω–∞ Render**
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Render's Cron Jobs –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ endpoint `/api/backup`:
```bash
curl https://your-app.onrender.com/api/backup
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
```
backups-server/
‚îú‚îÄ‚îÄ db.backup-20260208-140000.sqlite  (—É—Ç—Ä–æ–º)
‚îú‚îÄ‚îÄ db.backup-20260208-143000.sqlite  (–≤ –ø–æ–ª–¥–µ–Ω—å)
‚îú‚îÄ‚îÄ db.backup-20260208-160000.sqlite  (–¥–Ω—ë–º)
‚îî‚îÄ‚îÄ ...
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö backup'–æ–≤

–î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç `scripts/cleanup-backups.ps1`:
```powershell
# –£–¥–∞–ª–∏—Ç—å backup'—ã —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
Get-ChildItem backups-server/db.backup-*.sqlite | 
  Where-Object { $_.LastWriteTime -lt (Get-Date).AddDays(-30) } | 
  Remove-Item -Force

Write-Host "‚úÖ Old backups cleaned up"
```

–ó–∞–ø—É—Å–∫:
```bash
powershell -NoProfile -ExecutionPolicy Bypass -File scripts/cleanup-backups.ps1
```

## 3. –û–±—â–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –£—Ä–æ–≤–µ–Ω—å 1: –õ–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
```
‚úÖ .env —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è
‚úÖ backups-server/ —Ö—Ä–∞–Ω–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–ø–∏–∏ –ë–î
‚úÖ .gitignore –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞
‚ùå .env.example –ø—É–±–ª–∏—á–µ–Ω (—Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏ –±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏–π)
```

### –£—Ä–æ–≤–µ–Ω—å 2: GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```
‚úÖ .env –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ git
‚úÖ .env.example —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏
‚úÖ Husky pre-commit hook –±–ª–æ–∫–∏—Ä—É–µ—Ç .env
‚úÖ GitHub Secrets –¥–ª—è CI/CD
‚ùå –ù–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π –≤ –∫–æ–¥–µ
```

### –£—Ä–æ–≤–µ–Ω—å 3: Render (Production)
```
‚úÖ Environment Variables –≤ Render Dashboard
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–∞
‚ùå .env —Ñ–∞–π–ª –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
```

## 4. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ backup

### –ï—Å–ª–∏ –ë–î –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
taskkill /F /IM node.exe

# 2. –ù–∞–π—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ö–æ—Ä–æ—à–∏–π backup
dir backups-server/db.backup-*.sqlite | sort -Descending | head -1

# 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
Copy-Item backups-server/db.backup-20260208-143000.sqlite data/db.sqlite -Force

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
npm start
```

### –ï—Å–ª–∏ —Å–ª—É—á–∞–π–Ω–æ —É–¥–∞–ª–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ

```bash
# 1. –ù–∞–π—Ç–∏ backup –î–û —É–¥–∞–ª–µ–Ω–∏—è
git log --oneline | head -20  # –ù–∞–π—Ç–∏ –∫–æ–º–º–∏—Ç

# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª –∏–∑ git
git show <commit_hash>:data/db.sqlite > data/db.sqlite.recovered

# 3. –ò–ª–∏ –∏–∑ backup'–∞ (–≤—ã—à–µ)
```

## 5. –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [ ] `.env` —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –∏–∑ `.env.example`
- [ ] `.env` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `.gitignore`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Husky (pre-commit hook –∞–∫—Ç–∏–≤–µ–Ω)
- [ ] –ü–µ—Ä–≤—ã–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ `backups-server/`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: `npm run security-check`
- [ ] –ù–∞ Render –ø–æ–ª—É—á–µ–Ω—ã Environment Variables
- [ ] `.env` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç–∏–ª—Å—è (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å git log)
- [ ] –í—Å–µ –ø–∞—Ä–æ–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–µ—Å–ª–∏ –±—ã–ª–∞ —É—Ç–µ—á–∫–∞)
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 2FA –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö (Gmail, –Ø–Ω–¥–µ–∫—Å, Render)

## 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î

–û–±–Ω–æ–≤–∏—Ç–µ `server.js`:
```javascript
const fs = require('fs');
const logFile = 'logs/access.log';

app.use((req, res, next) => {
  fs.appendFileSync(logFile, 
    `[${new Date().toISOString()}] ${req.method} ${req.path}\n`
  );
  next();
});
```

### –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏
```bash
tail -100 logs/access.log
```

## 7. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã

### –î–ª—è production (Render)
- ‚úÖ –í–∫–ª—é—á–∏—Ç—å HTTPS (Render –¥–µ–ª–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å strong –ø–∞—Ä–æ–ª–∏ (16+ —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å API-–∫–ª—é—á–∏ (—Ä–∞–∑ –≤ 3 –º–µ—Å—è—Ü–∞)
- ‚úÖ –í–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–µ—Ä–≤–æ–ª (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è dev –∏ prod
- ‚úÖ –•—Ä–∞–Ω–∏—Ç—å `.env` —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`npm audit`)
- ‚úÖ –ù–µ –¥–µ–ª–∏—Ç—å—Å—è `.env` –ø–æ email/–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞–º

## –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
npm run security-check

# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
npm run backup-db

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å git
git status
git log --oneline | head -10

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ .env –∑–∞—â–∏—â—ë–Ω
git ls-files | grep .env  # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç

# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—è–∑–≤–∏–º–æ—Å—Ç–∏
npm update
npm audit
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–í–æ–ø—Ä–æ—Å—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏? –°–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub, –ù–û **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –≤ issue.
